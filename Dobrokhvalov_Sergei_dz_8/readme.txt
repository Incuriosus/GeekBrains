В задании №2 постарался учесть все возможные строки.
Про сохранение результата не было ничего сказано, поэтому просто прогоняю построчно до конца, все работает
В заданиях №3 м №4 не понял зачем прятать декоратор т.к. callback.__name__ возвращает имя функции, а не wrapper'а:

